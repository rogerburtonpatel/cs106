#!/bin/bash -e
# 
# Purpose: runs tests for module 2
# 

## Usage: 2-tests 
## 
## 
## 
## 
## author: rab
## date:  Mon Jan 30 16:04:53 EST 2023

BASEDIR=/h/rburto03/106/student-2023s

SVMDIR=$BASEDIR/src/svm
TESTDIR=$BASEDIR/tests


cd $SVMDIR

# compile if needed
if [[ ! -e $BASEDIR/bin/svm ]]; then
    echo "No svm executable found; compiling..."
    make
    if [[ "$?" -ne "0" ]]; then
        echo "Exiting on compilation failure."
        exit 1
    fi
fi

# run tests
for file in $TESTDIR/*; do
    svm $file
done

